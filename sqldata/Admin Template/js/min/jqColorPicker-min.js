!function($,o,t){"use strict";function e(o){return o.value||o.getAttribute("value")||$(o).css("background-color")||"#fff"}function r(o){return o.originalEvent.touches?o.originalEvent.touches[0]:o}function i(o){return $(o.find(x.doRender)[0]||o[0])}function s(o){var t=$(this),r=t.offset(),s=$(window),a=x.gap;o?(w=i(t),b.$trigger=t,(m||n()).css({left:(m[0]._left=r.left)-((m[0]._left=m[0]._left+m[0]._width-(s.scrollLeft()+s.width()))+a>0?m[0]._left+a:0),top:(m[0]._top=r.top+t.outerHeight())-((m[0]._top=m[0]._top+m[0]._height-(s.scrollTop()+s.height()))+a>0?m[0]._top+a:0)}).show(x.animationSpeed,function(){o!==!0&&(z._width=z.width(),k._width=k.width(),k._height=k.height(),v.setColor(e(w[0])),p(!0))})):$(m).hide(x.animationSpeed,function(){w.blur(),b.$trigger=null,p(!1)})}function n(){return $("head").append('<style type="text/css">'+(x.css||B)+(x.cssAddon||"")+"</style>"),b.$UI=m=$(G).css({margin:x.margin}).appendTo("body").show(0,function(){var o=$(this);A=x.GPU&&o.css("perspective")!==t,k=$(".cp-xy-slider",this),y=$(".cp-xy-cursor",this),C=$(".cp-z-cursor",this),z=$(".cp-alpha",this).toggle(!!x.opacity),F=$(".cp-alpha-cursor",this),x.buildCallback.call(b,o),o.prepend("<div>").children().eq(0).css("width",o.children().eq(0).width()),this._width=this.offsetWidth,this._height=this.offsetHeight}).hide().on(H,".cp-xy-slider,.cp-z-slider,.cp-alpha",a)}function a(o){var t=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");o.preventDefault&&o.preventDefault(),o.returnValue=!1,w._offset=$(this).offset(),(t="xy_slider"===t?l:"z_slider"===t?d:h)(o),u.on(M,c).on(R,t)}function c(o){u.off(R).off(M)}function l(o){var t=r(o),e=t.pageX-w._offset.left,i=t.pageY-w._offset.top;v.setColor({s:e/k._width*100,v:100-i/k._height*100},"hsv"),p()}function d(o){var t=r(o).pageY-w._offset.top,e=v.colors.hsv;v.setColor({h:360-t/k._height*360},"hsv"),p()}function h(o){var t=r(o).pageX-w._offset.left,e=t/z._width;v.setColor({},"rgb",e>1?1:0>e?0:e),p()}function p(o){var e=v.colors,r=e.hueRGB,i=e.RND.rgb,s=e.RND.hsl,n="#222",a="#ddd",c=w.data("colorMode"),l=1!==e.alpha,d=Math.round(100*e.alpha)/100,h=i.r+", "+i.g+", "+i.b,p="HEX"!==c||l?"rgb"===c||"HEX"===c&&l?l?"rgba("+h+", "+d+")":"rgb("+h+")":"hsl"+(l?"a(":"(")+s.h+", "+s.s+"%, "+s.l+"%"+(l?", "+d:"")+")":"#"+e.HEX,u=e.HUELuminance>.22?n:a,g=e.rgbaMixBlack.luminance>.22?n:a,b=(1-e.hsv.h)*k._height,x=e.hsv.s*k._width,_=(1-e.hsv.v)*k._height,m=d*z._width,R=A?"translate3d":"",H=w.val(),M=w[0].hasAttribute("value")&&""===H&&o!==t;k._css={backgroundColor:"rgb("+r.r+","+r.g+","+r.b+")"},y._css={transform:R+"("+x+"px, "+_+"px, 0)",left:A?"":x,top:A?"":_,borderColor:e.RGBLuminance>.22?n:a},C._css={transform:R+"(0, "+b+"px, 0)",top:A?"":b,borderColor:"transparent "+u},z._css={backgroundColor:"rgb("+h+")"},F._css={transform:R+"("+m+"px, 0, 0)",left:A?"":m,borderColor:g+" transparent"},w._css={backgroundColor:M?"":p,color:M?"":e.rgbaMixBGMixCustom.luminance>.22?n:a},w.text=M?"":H!==p?p:"",o!==t?f(o):E(f)}function f(o){k.css(k._css),y.css(y._css),C.css(C._css),z.css(z._css),F.css(F._css),x.doRender&&w.css(w._css),w.text&&w.val(w.text),x.renderCallback.call(b,w,"boolean"==typeof o?o:t)}var u=$(document),g,b,v,x,_="",w,m,k,y,C,z,F,R="touchmove.a mousemove.a pointermove.a",H="touchstart.a mousedown.a pointerdown.a",M="touchend.a mouseup.a pointerup.a",A=!1,E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(o){o()},G='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',B=".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",X=function(t){v=this.color=new o(t),x=v.options};X.prototype={render:p,toggle:s},$.fn.colorPicker=function(o){var t=function(){};return o=$.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:t,buildCallback:t,body:document.body,scrollResize:!0,gap:4},o),!b&&o.scrollResize&&$(window).on("resize scroll",function(){b.$trigger&&b.toggle.call(b.$trigger[0],!0)}),g=g?g.add(this):this,g.colorPicker=b||(b=new X(o)),_+=(_?", ":"")+this.selector,$(o.body).off(".a").on(H,function(o){var t=$(o.target);-1!==$.inArray(t.closest(_)[0],g)||t.closest(m).length||s()}).on("focus.a click.a",_,s).on("change.a",_,function(){v.setColor(this.value||"#FFF"),g.colorPicker.render(!0)}),this.each(function(){var t=e(this),r=t.split("("),s=i($(this));s.data("colorMode",r[1]?r[0].substr(0,3):"HEX").attr("readonly",x.preventFocus),o.doRender&&s.css({"background-color":t,color:function(){return v.setColor(t).rgbaMixBGMixCustom.luminance>.22?"#222":"#ddd"}})})}}(jQuery,Colors);